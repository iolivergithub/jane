<!DOCTYPE html>
<html>

<head>
	<title>Page Title</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="date=no">
	<link rel="stylesheet" type="text/css" href="assets/lcars-ultra-classic.css">
	<link rel="stylesheet" type="text/css" href="assets/lcars-colors.css">
	<script src="assets/jquery-3-7-0.min.js"></script>
</head>

<body>
	<section class="wrap-standard" id="column-3">
		<div class="wrap">
			<div class="scroll-top"><a id="scroll-top" href=""><span class="hop">screen</span> top</a></div>
			<div class="left-frame-top">
				<div class="panel-1"><a href="">LCARS</a></div>
				<div class="panel-2">02<span class="hop">-262000</span></div>
			</div>
			<div class="right-frame-top">
				<div class="banner"> <a href="">JANE LCARS</a> &#149; <span class="blink">Online</span> </div>
				<div class="data-cascade-button-group">
					<div class="cascade-wrapper">
						<div class="data-cascade" id="healthreport">
							<div class="row-1">
								<div class="dc1">101</div><div class="dc2">7109</div><div class="dc3">1966</div><div class="dc44">36</div><div class="dc55">880</div><div class="dc6">11.03</div><div class="dc77">1954</div><div class="dc8">03</div><div class="dc99">6.08</div><div class="dc100">241</div><div class="dc11">309</div><div class="dc12">7.08</div><div class="dc13">1935</div><div class="dc14">12.20</div><div class="dc150">53</div><div class="dc150">1961</div><div class="dc150">2.16</div>
							</div>

								<div class="row-2"><div class="dc1">102</div><div class="dc2">8102</div><div class="dc3">1987</div><div class="dc44">044</div><div class="dc55">0051</div><div class="dc6">1968</div><div class="dc77">704</div><div class="dc8">10.31</div><div class="dc99">1984</div><div class="dc100">1954</div><div class="dc11">764</div><div class="dc12">1940</div><div class="dc13">9.9</div><div class="dc14">1972</div><div class="dc150">815</div><div class="dc150">4.12</div><div class="dc150">2023</div></div><div class="row-3"><div class="dc1">103</div><div class="dc2">714</div><div class="dc3">1993</div><div class="dc44">0222</div><div class="dc55">4.4</div><div class="dc6">1969</div><div class="dc77">2450</div><div class="dc8">91</div><div class="dc99">56</div><div class="dc100">21</div><div class="dc11">716</div><div class="dc12">801</div><div class="dc13">417</div><div class="dc14">602</div><div class="dc150">5618</div><div class="dc150">238</div><div class="dc150">1443</div></div><div class="row-4"><div class="dc1">104</div><div class="dc2">6104</div><div class="dc3">1995</div><div class="dc44">3.22</div><div class="dc55">1931</div><div class="dc6">0.0</div><div class="dc77">0000</div><div class="dc8">1701</div><div class="dc99">1984</div><div class="dc100">218</div><div class="dc11">908</div><div class="dc12">10</div><div class="dc13">85</div><div class="dc14">1888</div><div class="dc150">27</div><div class="dc150">2879</div><div class="dc150">213</div></div><div class="row-5"><div class="dc1">105</div><div class="dc2">08</div><div class="dc3">2001</div><div class="dc44">713</div><div class="dc55">079</div><div class="dc6">1977</div><div class="dc77">LV</div><div class="dc8">426</div><div class="dc99">105</div><div class="dc100">10</div><div class="dc11">1642</div><div class="dc12">1979</div><div class="dc13">402</div><div class="dc14">795</div><div class="dc150">361</div><div class="dc150">0852</div><div class="dc150">984</div></div><div class="row-6"><div class="dc1">106</div><div class="dc2">31</div><div class="dc3">2017</div><div class="dc44">429</div><div class="dc55">65</div><div class="dc6">871</div><div class="dc77">24</div><div class="dc8">541</div><div class="dc99">656</div><div class="dc100">M</div><div class="dc11">113</div><div class="dc12">12.6</div><div class="dc13">27</div><div class="dc14">05</div><div class="dc150">85</div><div class="dc150">12.25</div><div class="dc150">7884</div></div><div class="row-7"><div class="dc1">107</div><div class="dc2">5</div><div class="dc3">2022</div><div class="dc44">784</div><div class="dc55">3304</div><div class="dc6">42</div><div class="dc77">733</div><div class="dc8">1224</div><div class="dc99">5801</div><div class="dc100">23</div><div class="dc11">1015</div><div class="dc12">84</div><div class="dc13">36</div><div class="dc14">029</div><div class="dc150">24</div><div class="dc150">318</div><div class="dc150">12.24</div></div><div class="row-8"><div class="dc1">108</div><div class="dc2">23</div><div class="dc3">174</div><div class="dc44">91</div><div class="dc55">947</div><div class="dc6">28</div><div class="dc77">527</div><div class="dc8">04</div><div class="dc99">0469</div><div class="dc100">2200</div><div class="dc11">88</div><div class="dc12">1985</div><div class="dc13">540</div><div class="dc14">3121</div><div class="dc150">308</div><div class="dc150">9571</div><div class="dc150">404</div></div>
						</div>
					</div>
					<nav id="nav-standard"> 
						<a href="#" id="b-one" onclick="loadwelcomemessage()">MESSAGE</a>						
						<a href="#" id="b-two" onclick="loadconfiguration()">CONFIGURATION</a>
						<a href="#" id="b-three" onclick="loadhealthupdate()">HEALTH STATUS</a>						
						<a href="#" id="b-five"  onclick="clearmessages()">CLEAR</a>
					</nav>
				</div>
				<div class="bar-panel first-bar-panel">
					<div class="bar-1"></div>
					<div class="bar-2"></div>
					<div class="bar-3"></div>
					<div class="bar-4"></div>
					<div class="bar-5"></div>
				</div>
			</div>
		</div>
		<div class="wrap" id="gap">
			<div class="left-frame">
				<div>
					<div class="panel-3" onclick="loadElements()">04<span class="hop">-ELEMENTS</span></div>
					<div class="panel-4" onclick="loadSessions()">05<span class="hop">-SESSIONS</span></div>
					<div class="panel-5" onclick="loadLog('40')">06<span class="hop">-LOG</span></div>
					<div class="panel-6">03<span class="hop">-111968</span></div>					
					<div class="panel-7">07<span class="hop">-081940</span></div>
					<div class="panel-8">08<span class="hop">-47148</span></div>
					<div class="panel-9">09<span class="hop">-081966</span></div>
				</div>
				<div>
					<div class="panel-10">10<span class="hop">-31</span></div>
				</div>
			</div>
			<div class="right-frame">
				<div class="bar-panel">
					<div class="bar-6"></div>
					<div class="bar-7"></div>
					<div class="bar-8"></div>
					<div class="bar-9"></div>
					<div class="bar-10"></div>
				</div>
				<main>

					<!-- Start your content here. -->

					<h1 id="datatitle">...</h1>

					<table id="datatable">
  <tr>
    <th>Data</th>
  </tr>
  <tr>
    <td>Awaiting feed selection</td>
  </tr>

</table>


<script>
function loadhealthupdate() {
  console.log("loadhealthupdate")

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    	renderhealthtable(this)
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8520/health?form=xml", true);
  xhttp.send();
}

function renderhealthtable(xml) {
  var i;
  var xmlDoc = xml.responseXML;
  var list="";
  var x = xmlDoc.getElementsByTagName("Counts");
  console.log("renderhealthtable")
  console.log(x[0].getElementsByTagName("Ne")[0])
   var list = "<div class=row-1>" +
       "<div class=dc1>Ne " + x[0].getElementsByTagName("Ne")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc2>Nep " + x[0].getElementsByTagName("Np")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc3>Nev " + x[0].getElementsByTagName("Nev")[0].childNodes[0].nodeValue + "</div>" + 
    "</div>" +
    "<div class=row-2>" +
       "<div class=dc1>Nc " + x[0].getElementsByTagName("Nc")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc2>Nr " + x[0].getElementsByTagName("Nr")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc3>Nh " + x[0].getElementsByTagName("Nh")[0].childNodes[0].nodeValue + "</div>" + 
    "</div>" +
      "<div class=row-3>" +
       "<div class=dc1>Nrul " + x[0].getElementsByTagName("Nrul")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc2>Npol " + x[0].getElementsByTagName("Npol")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc3>*</div>" + 
    "</div>" +
      "<div class=row-4>" +
       "<div class=dc1>Nlog " + x[0].getElementsByTagName("Nlog")[0].childNodes[0].nodeValue + "</div>" + 
       "<div class=dc2>*</div>" + 
       "<div class=dc3>^</div>" +        
    "</div>" ;    
  document.getElementById("healthreport").innerHTML = list;
}

function clearmessages() {
	  let msg = "<div class=row-1>" +
                  "<div class=dc1>Message Display</div>" +          
                  "<div class=dc2>* cleared *</div>" + 
                "</div>"
	  document.getElementById("healthreport").innerHTML = msg;

}


function loadwelcomemessage() {
  console.log("loadwelcomemessage")

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    	renderwelcomemessage(this)
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8520?form=xml", true);
  xhttp.send();
}

function renderwelcomemessage(xml) {
  var i;
  var xmlDoc = xml.responseXML;
  var list="";
  var x = xmlDoc.getElementsByTagName("homepageData");

  var list = ""

  for (let i=0; i<x[0].childNodes.length; i++) {
         let nn = x[0].childNodes[i].nodeName;
         let tc =x[0].childNodes[i].textContent;
	  console.log("<div class=row-"+i.toString()+">")

         list += "<div class=row-"+(i+1).toString()+">" +
                  "<div class=dc1>" + nn  + "</div>" +          
                  "<div class=dc2>" + tc  + "</div>" + 
                "</div>"

     }
   


  document.getElementById("healthreport").innerHTML = list;
}







function loadSessions() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8520/sessions?form=xml", true);
  xhttp.send();
   
}

function loadElements() {
  console.log("loadhealthupdate")

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    	renderelementstable(this)
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8520/elements?form=xml", true);
  xhttp.send();
}

function renderelementstable(xml) {
  var i;
  var xmlDoc = xml.responseXML;
  var list="";
  var x = xmlDoc.getElementsByTagName("returnElements");
  console.log("renderelementstable")
  console.log(x[0].childNodes)

         list += "<tr> <th>Identifier</th> </tr>"

  for (let i=0; i<x[0].childNodes.length; i++) {
         let nn = x[0].childNodes[i].nodeName;
         let tc =x[0].childNodes[i].textContent;

         if (nn=="Elements") {
             list += "<tr> <td> <a href=http://127.0.0.1:8540/element/"+tc+" target=_blank>"+tc+"</a></td></tr>"
                 }

     }

    document.getElementById("datatable").innerHTML = list;
    document.getElementById("datatitle").innerHTML = "ELEMENTS";

    
}








function loadLog() {
  console.log("loadLog")

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    	renderelementstable(this)
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8520/log?max=40&form=xml", true);
  xhttp.send();
}

function renderelementstable(xml) {
  var i;
  var xmlDoc = xml.responseXML;
  var list="";
  var x = xmlDoc.getElementsByTagName("returnLogEntries");
  console.log(x[0].childNodes.entries())

         list += "<tr> <th>Stardate</th><th>Channel</th> <th>Operation</th> <th>Message</th>  </tr>"

  x[0].childNodes.forEach(
  	 function(node,index) {
      if (node.nodeName=="LogEntries") {
      	  let id = node.childNodes[0].textContent
      	  let ts = node.childNodes[1].textContent
      	  let ch = node.childNodes[2].textContent
      	  let op = node.childNodes[3].textContent
      	  let ri = node.childNodes[5].textContent
      	  let msg = node.childNodes[6].textContent


      	  let stardate = calculateStardate( ts )
      	  console.log("stardate ",stardate)


      	  list += "<tr>"
      	  list += "<td><a href=http://127.0.0.1:8540/log/"+id+" target=_blank>"+stardate+"</a></td>"
      	  list += "<td>"+ch+"</td>" 
      	  list += "<td>"+op+"</td>"      	  
      	  list += "<td>"+ri+"</td>"      	  
      	  list += "<td>"+msg+"</td>"      	  
      	       	  
      	  list += "</tr>"
      }
  	 }
                 

     )

    document.getElementById("datatable").innerHTML = list;
    document.getElementById("datatitle").innerHTML = "LOG";

    
}








function leapYear(year)
{
  return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);
}


function calculateStardate(ts)
{
		console.log("Calculating Stardate")
    let ms = Date( Number(ts) )
    let date = new Date(ms) 

    // calculate n
    let n=365
    if  (leapYear(date.getYear())== true) {
       n=366
    }

    //base star dates  - asssuming 24th century here
    const b = 2323       // 2323, c=0.0,    2005, c=58000.00
    const c = 0.0        

    //month number
    m = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24))
        
    //day
    d = date.getDate()

    //year
    y = date.getYear()

    // calculate stardate https://www.wikihow.com/Calculate-Stardates
    // no idea if this is actually correct :-)

    sd = c+(1000*(y-b))+ ( (1000/n) * (m+d-1) )
    console.log(n,m,d,y,sd)

  

    return sd
}





</script>













					<!-- End content area. -->


					<footer>
						<div class="footer-inside">
							<div class="footer-text">

								<p> <!-- Your copyright information is only a suggestion. You can also choose to delete this paragraph. -->
									Content Copyright &#169; 2025 Ian Oliver
								</p>

								<p>	<!-- This paragraph must not be removed. -->
									LCARS Inspired Website Template by <a href="https://www.thelcars.com">www.TheLCARS.com</a>
								</p>

							</div>
						</div>
						<div class="footer-panel"> <span class="hop">22</span>47 </div>
					</footer>
				</main>
			</div>
		</div>
	</section>	
	<script type="text/javascript" src="assets/lcars.js"></script>
</body>

</html>