# Intent

An intent is a description of an operation that is made against an attestable elelement. The term intent is used as not all attestable elements may be capable of performing the operations either due to their own functionality or outside effects such as network or element availability.

The intent consists of a set of its identifier, the compulsory description and a set of optional structures.


## Compulsory Fields

The compulsory fields are described below. The field *itemid* is generated by Jane and is a UUID4; this field should not be specified when adding a new element.

| Field | Type | Description |
| --- | --- | --- |
| itemid | UUID4 | Internally generated identifier |
| name | String | A short name for the element |
| description | String | A longer, more descripive description |
| function | FUNCTION | A layer-7 operation name that the attestable element should understand |
| parameters | Dictionary | A dictionary object containing potential parameters for the function |


## Functions

The functions are provided by the protocols, a list of specific protocols and functions is provided elsewhere (soon). Following is a partial list of current functions and protocols. A function might be provided by more than one protocol.

| Function | Description | Paramter Fields |
| --- | --- | --- |
| tom2/pcrs | Requests the list of PCRs from a TPM 2.0 device | tpm2/device |
| tpm2/quote | Requets a quote from a TPM 2.0 | tpm2/device, pcrSelection, bank |
| uefi/eventlog | | uefi/eventlog |
| ima/asciilog | | ima/ASCIIlog| 
| txt/log | | |
| sys/info | | |
| marblerun/quote | | | 
| marblerun/manifest | | |
| marblerun/updatelogs | | |
| marblerun/null | | |

Specifics about intent functions are described here (functions.md)[functions])

## Go Definition

The definition of the element structure can be found at https://gitlab.jyu.fi/ijoliver/jane/-/blob/main/janeserver/structures/intents.go

## Standard Intents

The file https://gitlab.jyu.fi/ijoliver/jane/-/blob/main/etc/standardintents.json contains a standard list of common intents that can be loaded into Jane. These intents use a fixed `itemid` field so should be consistent across all installations. Further discussion of these is made here [Standard Intents](standardintents.md).

Jane contains a function in the UI to reload these on demand, hence the use of the standard itemid. The file is loaded from the above source.

The file https://gitlab.jyu.fi/ijoliver/jane/-/blob/main/etc/standardintents.sha256 contains the hash of the standard intents. The value in this file should be `e02bb3a7f75e9fd4bdc826a089d23f6d1aaadda38640a409256d0c1459231582`

This file might be loaded into mongodb like so, replace `DB` with the name of the attestation database in use (see: https://www.mongodb.com/docs/database-tools/installation/installation-linux/)

```bash
mongoimport --db DB --collection intents --file standarditents.json
```

## Example

```json
{ "itemid" : "57c5a486-64ce-4563-b281-a743429c1617", 
  "name" : "Test System", 
  "description" : "This is a test system", 
  "function" : "tpm2/pcrs",
  "parameters" : {}
 }
```
